# -------------------------------------------
# Räume
# 1 - Diele EG
# 2 - Essen/Wohnen
# 3 - Büro
# 4 - Schlafen
# 5 - Kind 1 - Linus
# 6 - Kind 2 - Erik
# 7 - WC/DU EG
# 8 - Bad OG
# -------------------------------------------

modbus:
  - name: WGT
    type: tcp
    host: !secret wgt_ip
    port: !secret wgt_port

    sensors:
      # ---------- Defaults für °C-Temperaturen ----------
      - <<: &TEMP_C
          unit_of_measurement: "°C"
          slave: 1
          scale: 0.1
          precision: 1
          data_type: int16
          device_class: temperature
          state_class: measurement
        name: "mb_temp_wgt_aussen"
        address: 209
        unique_id: "mb_temp_wgt_aussen"

      # ---- Räume: Ist-/Soll ----
      - <<: *TEMP_C
        name: "Temperatur Schlafzimmer"
        address: 363
        unique_id: "Temperatur Schlafzimmer"
      - <<: *TEMP_C
        name: "Zieltemperatur Schlafzimmer"
        address: 403
        unique_id: "wgt_zieltemperatur_schlafzimmer"

      - <<: *TEMP_C
        name: "Temperatur Büro"
        address: 362
        unique_id: "Temperatur Büro"
      - <<: *TEMP_C
        name: "Zieltemperatur Büro"
        address: 402
        unique_id: "wgt_zieltemperatur_buero"

      - <<: *TEMP_C
        name: "Temperatur Diele"
        address: 360
        unique_id: "Temperatur Diele"
      - <<: *TEMP_C
        name: "Zieltemperatur Diele"
        address: 400
        unique_id: "wgt_zieltemperatur_diele"

      - <<: *TEMP_C
        name: "Temperatur Wohnzimmer"
        address: 361
        unique_id: "Temperatur Wohnzimmer"
      - <<: *TEMP_C
        name: "Zieltemperatur Wohnzimmer"
        address: 401
        unique_id: "wgt_zieltemperatur_wohnzimmer"

      - <<: *TEMP_C
        name: "Temperatur WC EG"
        address: 366
        unique_id: "Temperatur WC EG"
      - <<: *TEMP_C
        name: "Zieltemperatur WC EG"
        address: 406
        unique_id: "wgt_zieltemperatur_wc_eg"

      - <<: *TEMP_C
        name: "Temperatur Bad OG"
        address: 367
        unique_id: "Temperatur Bad OG"
      - <<: *TEMP_C
        name: "Zieltemperatur Bad OG"
        address: 407
        unique_id: "wgt_zieltemperatur_bad_og"

      - <<: *TEMP_C
        name: "Temperatur Erik"
        address: 365
        unique_id: "Temperatur Erik"
      - <<: *TEMP_C
        name: "Zieltemperatur Erik"
        address: 405
        unique_id: "wgt_zieltemperatur_erik"

      - <<: *TEMP_C
        name: "Temperatur Linus-Henry"
        address: 364
        unique_id: "Temperatur Linus-Henry"
      - <<: *TEMP_C
        name: "Zieltemperatur Linus-Henry"
        address: 404
        unique_id: "wgt_zieltemperatur_linus_henry"

      # ---- Prozess-/Geräte-Temperaturen ----
      - <<: *TEMP_C
        name: "Temperatur nach EWT"
        address: 200
        unique_id: "wgt_temperatur_nach_ewt"
      - <<: *TEMP_C
        name: "Temperatur nach VHR"
        address: 201
        unique_id: "wgt_temperatur_nach_vhr"
      - <<: *TEMP_C
        name: "Temperatur vor NE"
        address: 202
        unique_id: "wgt_temperatur_vor_ne"
      - <<: *TEMP_C
        name: "Temperatur nach NE"
        address: 203
        unique_id: "wgt_temperatur_nach_ne"
      - <<: *TEMP_C
        name: "Temperatur Abluft"
        address: 204
        unique_id: "wgt_temperatur_abluft"
      - <<: *TEMP_C
        name: "Temperatur im WT"
        address: 205
        unique_id: "wgt_temperatur_im_wt"
      - <<: *TEMP_C
        name: "Temperatur Verdampfer"
        address: 206
        unique_id: "wgt_temperatur_verdampfer"
      - <<: *TEMP_C
        name: "Temperatur Kondensator"
        address: 207
        unique_id: "wgt_temperatur_kondensator"

      # ---------- Defaults für nackte int16 ----------
      - <<: &INT16
          slave: 1
          data_type: int16
        name: "Betriebsart WGT"
        address: 100
        unique_id: "wgt_betriebsart_wgt"

      - <<: *INT16
        name: "Manuelle Luftstufe WGT"
        address: 101
        unique_id: "wgt_manuelle_luftstufe_wgt"
      - <<: *INT16
        name: "Aktuelle Luftstufe WGT"
        address: 102
        unique_id: "wgt_aktuelle_luftstufe_wgt"

      - <<: *INT16
        name: "Luftleistung Zuluft WGT"
        address: 142
        unit_of_measurement: "%"
        unique_id: "wgt_luftleistung_zuluft_wgt"
      - <<: *INT16
        name: "Luftleistung Abluft WGT"
        address: 143
        unit_of_measurement: "%"
        unique_id: "wgt_luftleistung_abluft_wgt"

      - <<: *INT16
        name: "Drehzahl Zuluft WGT"
        address: 144
        unit_of_measurement: "rpm"
        unique_id: "wgt_drehzahl_zuluft_wgt"
      - <<: *INT16
        name: "Drehzahl Abluft WGT"
        address: 145
        unit_of_measurement: "rpm"
        unique_id: "wgt_drehzahl_abluft_wgt"

      - <<: *INT16
        name: "Gerätefilter WGT reinigen"
        address: 245
        unique_id: "wgt_geraetefilter_wgt_reinigen"
      - <<: *INT16
        name: "Gerätefilter WGT Restlaufzeit"
        address: 265
        unit_of_measurement: "Tage"
        unique_id: "wgt_geraetefilter_wgt_restlaufzeit"
      - <<: *INT16
        name: "Vorgelagerter Filter WGT reinigen"
        address: 246
        unique_id: "wgt_vorgelagerter_filter_wgt_reinigen"
      - <<: *INT16
        name: "Vorgelagerter Filter WGT Restlaufzeit"
        address: 263
        unit_of_measurement: "Tage"
        unique_id: "wgt_vorgelagerter_filter_wgt_restlaufzeit"

      - <<: *INT16
        name: "Stoßlüften Restlaufzeit"
        address: 112
        unit_of_measurement: "Min"
        unique_id: "wgt_stosslueften_restlaufzeit"

      - <<: *INT16
        name: "Zusatzheizung aktiv Diele"
        address: 460
        unique_id: "wgt_zusatzheizung_aktiv_diele"
      - <<: *INT16
        name: "Zusatzheizung aktiv Wohnzimmer"
        address: 461
        unique_id: "wgt_zusatzheizung_aktiv_wohnzimmer"
      - <<: *INT16
        name: "Zusatzheizung aktiv Büro"
        address: 462
        unique_id: "wgt_zusatzheizung_aktiv_buero"
      - <<: *INT16
        name: "Zusatzheizung aktiv Schlafzimmer"
        address: 463
        unique_id: "wgt_zusatzheizung_aktiv_schlafzimmer"
      - <<: *INT16
        name: "Zusatzheizung aktiv Linus"
        address: 464
        unique_id: "wgt_zusatzheizung_aktiv_linus"
      - <<: *INT16
        name: "Zusatzheizung aktiv Erik"
        address: 465
        unique_id: "wgt_zusatzheizung_aktiv_erik"
      - <<: *INT16
        name: "Zusatzheizung aktiv WC EG"
        address: 466
        unique_id: "wgt_zusatzheizung_aktiv_wc_eg"
      - <<: *INT16
        name: "Zusatzheizung aktiv Bad OG"
        address: 467
        unique_id: "wgt_zusatzheizung_aktiv_bad_og"

      - <<: *INT16
        name: "Status Waermepumpe WGT"
        address: 114
        unique_id: "wgt_status_waermepumpe_wgt"
      - <<: *INT16
        name: "EVU-Sperre WGT"
        address: 251
        unique_id: "wgt_evu_sperre_wgt"
      - <<: *INT16
        name: "WGT Heizen_Kühlen"
        address: 230
        unique_id: "wgt_wgt_heizen_kuehlen"
      - <<: *INT16
        name: "WGT Heizen"
        address: 231
        unique_id: "wgt_wgt_heizen"
      - <<: *INT16
        name: "WGT Kühlen"
        address: 232
        unique_id: "wgt_wgt_kuehlen"
      - <<: *INT16
        name: "WGT Fehler"
        address: 240
        unique_id: "wgt_wgt_fehler"
      - <<: *INT16
        name: "WGT NHR Zustand"
        address: 116
        unique_id: "wgt_wgt_nhr_zustand"
      - <<: *INT16
        name: "WGT Status Zuluft"
        address: 117
        unique_id: "wgt_wgt_status_zuluft"
      - <<: *INT16
        name: "WGT Status Abluft"
        address: 118
        unique_id: "wgt_wgt_status_abluft"

    switches:
      # Basis-Defaults via Anchor (&SW_HOLD). Der erste Eintrag ist real + dient als Vorlage.
      - &SW_HOLD
        name: "Stoßlüften aktivieren"
        address: 111
        slave: 1
        write_type: holding # korrigiert (vorher: holdings)
        command_on: 1
        command_off: 0
        verify:
          delay: 5
        unique_id: "switch_wgt_stosslueften_aktivieren"

      - <<: *SW_HOLD
        name: "Zusatzheizungen aktiv"
        address: 234
        unique_id: "switch_wgt_zusatzheizungen_aktiv"

      - <<: *SW_HOLD
        name: "Zusatzheizungen Diele EG"
        address: 440
        unique_id: "switch_wgt_zusatzheizungen_diele_eg"

      - <<: *SW_HOLD
        name: "Zusatzheizungen Wohnzimmer"
        address: 441
        unique_id: "switch_wgt_zusatzheizungen_wohnzimmer"

      - <<: *SW_HOLD
        name: "Zusatzheizungen Büro"
        address: 442
        verify:
          delay: 10
        unique_id: "switch_wgt_zusatzheizungen_buero"

      - <<: *SW_HOLD
        name: "Zusatzheizungen Schlafzimmer"
        address: 443
        unique_id: "switch_wgt_zusatzheizungen_schlafzimmer"

      - <<: *SW_HOLD
        name: "Zusatzheizungen Linus"
        address: 444
        unique_id: "switch_wgt_zusatzheizungen_linus"

      - <<: *SW_HOLD
        name: "Zusatzheizungen Erik"
        address: 445
        unique_id: "switch_wgt_zusatzheizungen_erik"

      - <<: *SW_HOLD
        name: "Zusatzheizungen WC EG"
        address: 446
        unique_id: "switch_wgt_zusatzheizungen_wc_eg"

      - <<: *SW_HOLD
        name: "Zusatzheizungen Bad OG"
        address: 447
        unique_id: "switch_wgt_zusatzheizungen_bad_og"
